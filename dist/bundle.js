!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=document.getElementById("country");""===r.value&&(r.value=localStorage.getItem("inputValue"));const o=()=>{localStorage.setItem("inputValue",document.getElementById("country").value)};function c(){const e=this.parentNode;e.querySelector("p").innerHTML="";const t=e.querySelector("span").innerHTML;fetch(`https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=extracts&exintro=&explaintext=&formatversion=2&titles=${t}`).then(function(e){return e.json()}).then(function(t){const n=k("div"),r=k("p");i(e,n,r),u(n,r),a(r),t.query.pages[0].invalid||t.query.pages[0].missing||""==t.query.pages[0].extract?n.innerHTML="No information about the city":n.innerHTML=t.query.pages[0].extract})}const i=(e,t,n)=>{O(e,t),O(e,n)},u=(e,t)=>{e.classList.add("city_text"),t.classList.add("less")},a=e=>{e.innerHTML="read less -",e.addEventListener("click",l)};function l(){const e=this.parentNode,t=e.querySelector(".city_text"),n=e.querySelector(".less");e.querySelector("p").innerHTML="read more +",s(t,n)}const s=(e,t)=>{e.remove(),t.remove()};let d=!1;function p(){const e=`https://api.openaq.org/v1/latest?limit=10&country=${g}&parameter=pm25&order_by=measurements[0].value&sort=desc`;let t=document.getElementById("cities_container");if(d){document.querySelectorAll(".city_div").forEach(e=>t.removeChild(e)),d=!d}fetch(e).then(function(e){return e.json()}).then(function(e){return(t=e.results).map(function(e){const t=k("div"),n=k("div"),r=k("span"),o=k("div"),i=k("span"),u=k("p");m(t,n,r,o,i,u),y(t,n,o);const a=e.measurements[0].value;r.innerHTML=Math.round(a);const l=e.city;i.innerHTML=l.replace("CCAA","").replace("Com. ","").replace("Warszawa","Warsaw"),u.innerHTML="read more +",document.querySelectorAll("p").forEach(function(e){e.addEventListener("click",c)})})}),d=!0}const m=(e,t,n,r,o,c)=>{const i=document.getElementById("cities_container");O(t,n),O(e,t),O(e,r),O(r,o),O(r,c),O(i,e)},y=(e,t,n)=>{e.classList.add("city_div"),t.classList.add("number"),n.classList.add("city_item")},f=document.getElementById("country"),v=[{name:"Poland",code:"PL"},{name:"Germany",code:"DE"},{name:"France",code:"FR"},{name:"Spain",code:"ES"}];let g,L=[];const h=document.querySelector(".country_list");let E=!1;const M=()=>{S();let e=document.getElementById("country").value;e.length>0&&(f.addEventListener("keydown",_),b(e))},S=()=>{h.innerHTML="",L=[]},_=e=>{if(13==e.keyCode){e.preventDefault();const t=document.getElementById("country").value,n=t[0].toUpperCase()+t.slice(1);H(n),p(),S(),o(),f.blur()}},b=e=>{for(let t=0;t<v.length;t++){const n=v[t].name.toLowerCase(),r=e.toLowerCase();-1!=n.indexOf(r)&&L.push(v[t].name)}T()},T=()=>{for(let e=0;e<L.length;e++)h.innerHTML+=`<li class="country_item">${L[e]}</li>`;q()},q=()=>{document.querySelectorAll(".country_item").forEach(e=>e.addEventListener("click",function(){document.getElementById("country").value=e.innerHTML;let t=e.innerHTML;H(t),p(),S(),o()}))},H=e=>{for(let t=0;t<v.length;t++){if(e===v[t].name)return B(),g=v[t].code;g=""}x()},x=()=>{I(),B(),E=!0},I=()=>{const e=k("div"),t=k("p"),n=k("p");j(e,t,n)},j=(e,t,n)=>{const r=document.getElementById("cities_container");O(e,t),O(e,n),O(r,e),w(t,n),C(e)},C=e=>{e.classList.add("not_support")},w=(e,t)=>{e.innerHTML="Sorry, we do not support this data.",t.innerHTML="Choose one of available country."},B=()=>{if(E){document.querySelector(".not_support").remove(),E=!1}};function k(e){return document.createElement(e)}function O(e,t){return e.appendChild(t)}f.addEventListener("keyup",M),f.addEventListener("click",M),n.d(t,"createEl",function(){return k}),n.d(t,"append",function(){return O})}]);
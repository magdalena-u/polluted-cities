!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=document.getElementById("country");""===r.value&&(r.value=localStorage.getItem("inputValue"));function o(){const e=this.parentNode;e.querySelector("p").innerHTML="";const t=e.querySelector("span").innerHTML;fetch(`https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=extracts&exintro=&explaintext=&formatversion=2&titles=${t}`).then(function(e){return e.json()}).then(function(t){const n=A("div"),r=A("p");c(e,n,r),i(n,r),u(r),t.query.pages[0].invalid||t.query.pages[0].missing||""==t.query.pages[0].extract?n.innerHTML="No information about the city":n.innerHTML=t.query.pages[0].extract})}const c=(e,t,n)=>{N(e,t),N(e,n)},i=(e,t)=>{e.classList.add("city_text"),t.classList.add("less")},u=e=>{e.innerHTML="read less -",e.addEventListener("click",a)};function a(){const e=this.parentNode,t=e.querySelector(".city_text"),n=e.querySelector(".less");e.querySelector("p").innerHTML="read more +",l(t,n)}const l=(e,t)=>{e.remove(),t.remove()};let s=!1;function d(){const e=`https://api.openaq.org/v1/latest?limit=10&country=${v}&parameter=pm25&order_by=measurements[0].value&sort=desc`;let t=document.getElementById("cities_container");if(s){document.querySelectorAll(".city_div").forEach(e=>t.removeChild(e)),s=!s}fetch(e).then(function(e){return e.json()}).then(function(e){return(t=e.results).map(function(e){const t=A("div"),n=A("div"),r=A("span"),c=A("div"),i=A("span"),u=A("p");m(t,n,r,c,i,u),y(t,n,c);const a=e.measurements[0].value;r.innerHTML=Math.round(a);const l=e.city;i.innerHTML=l.replace("CCAA","").replace("Com. ","").replace("Warszawa","Warsaw"),u.innerHTML="read more +",document.querySelectorAll("p").forEach(function(e){e.addEventListener("click",o)})})}),s=!0}const m=(e,t,n,r,o,c)=>{const i=document.getElementById("cities_container");N(t,n),N(e,t),N(e,r),N(r,o),N(r,c),N(i,e)},y=(e,t,n)=>{e.classList.add("city_div"),t.classList.add("number"),n.classList.add("city_item")},p=document.getElementById("country"),f=[{name:"Poland",code:"PL"},{name:"Germany",code:"DE"},{name:"France",code:"FR"},{name:"Spain",code:"ES"}];let v,L=[];const g=document.querySelector(".country_list");let h=!1,E=-1;const S=()=>{M();let e=document.getElementById("country").value;e.length>0&&(p.addEventListener("keydown",_),b(e))},M=()=>{g.innerHTML="",L=[]},_=e=>{if(13==e.keyCode){e.preventDefault();const t=document.querySelector(".hover");null!=t?x(t):C()}},b=e=>{for(let t=0;t<f.length;t++){const n=f[t].name.toLowerCase(),r=e.toLowerCase();-1!=n.indexOf(r)&&L.push(f[t].name)}q()},q=()=>{for(let e=0;e<L.length;e++)g.innerHTML+=`<li class="country_item">${L[e]}</li>`,p.addEventListener("keyup",H);T()},T=()=>{document.querySelectorAll(".country_item").forEach(e=>e.addEventListener("click",function(){document.getElementById("country").value=e.innerHTML;let t=e.innerHTML;I(t)}))},H=e=>{const t=document.querySelectorAll(".country_item");40===e.keyCode&&(++E===t.length&&(E=0),t[E].classList.add("hover")),38===e.keyCode&&(--E<0&&(E=t.length-1),t[E].classList.add("hover"))},x=e=>{const t=document.getElementById("country"),n=e.innerHTML;t.value=n,I(n),p.blur(),E=-1},C=()=>{const e=document.getElementById("country").value;if(""==e)k();else{const t=e[0].toUpperCase()+e.slice(1);I(t),p.blur()}},I=e=>{(e=>{for(let t=0;t<f.length;t++){if(e===f[t].name)return P(),v=f[t].code;v=""}k()})(e),d(),M(),localStorage.setItem("inputValue",document.getElementById("country").value)},k=()=>{j(),P(),h=!0},j=()=>{const e=A("div"),t=A("p"),n=A("p");B(e,t,n)},B=(e,t,n)=>{const r=document.getElementById("cities_container");N(e,t),N(e,n),N(r,e),O(t,n),w(e)},w=e=>{e.classList.add("not_support")},O=(e,t)=>{e.innerHTML="Sorry, we do not support this data.",t.innerHTML="Choose one of available country."},P=()=>{if(h){document.querySelector(".not_support").remove(),h=!1}};function A(e){return document.createElement(e)}function N(e,t){return e.appendChild(t)}p.addEventListener("keyup",S),p.addEventListener("click",S),g.addEventListener("mouseover",()=>{const e=document.querySelector(".hover");return null!=e&&e.classList.remove("hover"),E=-1}),n.d(t,"createEl",function(){return A}),n.d(t,"append",function(){return N})}]);